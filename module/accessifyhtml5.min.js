accessifyhtml5.js - v2.0.3 - 2015-02-17
 * https://github.com/michsch/accessifyhtml5.js
 * original: https://github.com/yatil/accessifyhtml5.js
 * Copyright (c) 2015 Eric Eggert, Michael Schulze (AMD wrapper); Licensed MIT license(function(e,t,l){"use strict";"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():"function"==typeof e.jQuery?e.jQuery[l.toLowerCase()]=t():e[l]=t()})("object"==typeof window&&window||this,function(){"use strict";return function(e,t){var l,r,a,n,o,i,s,u,c,d,f,p,y,m,h,b,g;if(d={article:{role:"article"},aside:{role:"complementary"},nav:{role:"navigation"},main:{role:"main"},output:{"aria-live":"polite"},section:{role:"region"},"[required]":{"aria-required":"true"}},b={ok:[],warn:[],fail:[]},u=b.fail,l=RegExp("aria-[a-z]+|role|tabindex|title|alt|data-[\\w-]+|lang|style|maxlength|placeholder|pattern|required|type|target|accesskey|longdesc"),a="acfy-id-",m=0,r=document,r.querySelectorAll){if(e&&(e.header&&(d[e.header]={role:"banner"}),e.footer&&(d[e.footer]={role:"contentinfo"}),e.main&&(d[e.main]={role:"main"},d.main={role:""})),t&&t._CONFIG_&&t._CONFIG_.ignore_defaults)d=t;else for(y in t)d[y]=t[y];for(c in d)if(!c.match(/^_(CONFIG|[A-Z]+)_/)&&d.hasOwnProperty(c)){try{s=r.querySelectorAll(c)}catch(v){u.push({sel:c,attr:null,val:null,msg:"Invalid syntax for `document.querySelectorAll` function",ex:v})}for(h=d[c],(!s||1>s.length)&&b.warn.push({sel:c,attr:null,val:null,msg:"Not found"}),f=0;s.length>f;){for(p in h)if(h.hasOwnProperty(p)){if(n=p,g=h[p],n.match(/_?note/))continue;if(!n.match(l)){u.push({sel:c,attr:n,val:null,msg:"Attribute not allowed",re:l});continue}if(!(typeof g).match(/string|number|boolean/)){u.push({sel:c,attr:n,val:g,msg:"Value-type not allowed"});continue}if(o=n.match(/(describ|label)l?edby/)){try{i=r.querySelector(g)}catch(v){u.push({sel:c,attr:n,val:g,msg:"Invalid selector syntax (2) - see 'val'",ex:v})}if(!i){u.push({sel:c,attr:n,val:g,msg:"Labelledby ref not found - see 'val'"});continue}i.id||(i.id=a+m),g=i.id,n="aria-"+("label"===o[1]?"labelledby":"describedby"),m++}s[f].hasAttribute(n)?b.warn.push({sel:c,attr:n,val:g,msg:"Already present, skipped"}):(s[f].setAttribute(n,g),b.ok.push({sel:c,attr:n,val:g,msg:"Added"}))}f++}}}return b.input=d,b}},"AccessifyHTML5");